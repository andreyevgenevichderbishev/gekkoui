# UI Фонаря Configurator

Это Android-приложение позволяет настраивать пользовательский интерфейс (UI) фонаря через оптический канал с использованием UART-протокола. Приложение использует вспышку (LED фонаря) устройства для передачи конфигурационных данных в виде бинарных последовательностей, которыми можно настроить пользовательский интерфейс фонарей YLP [Gekko 1.0](https://ylplight.com/katalog/1/nalobnye-fonari/gekko-10/), [Gekko 1.1W](https://ylplight.com/katalog/1/nalobnye-fonari/gekko-1_1W/). Более подробно можно почитать [тут](https://forum.fonarevka.ru/showthread.php?t=46567)

## Возможности

- **Множественные профили UI:** Настраивайте и сохраняйте несколько профилей (UI0, UI1, UI2, UI3) с различными параметрами.
- **Гибкая настройка параметров:** Задавайте значения через спиннеры, чекбоксы и текстовые поля.
- **Передача конфигурации через LED:** Генерация и передача бинарного сообщения с контрольной суммой посредством мигания фонариком.
- **Настройка таймингов:** Возможность задавать длительность миганий и интервалы между ними для корректной передачи данных.
- **Сохранение настроек:** Все изменения сохраняются в SharedPreferences, что позволяет быстро загружать и применять ранее настроенные профили.

## Как это работает

1. **Сбор параметров:** Пользователь вводит необходимые параметры конфигурации через интерфейс приложения.
2. **Генерация бинарного сообщения:** На основе введённых данных формируется бинарная строка, содержащая заголовок, параметры, контрольные суммы и другие служебные данные.
3. **Передача через вспышку:** С помощью API Camera2 (метод `setTorchMode`) приложение управляет LED фонариком, передавая бинарное сообщение в виде последовательных миганий с заданными временными задержками.
4. **Сохранение и загрузка конфигураций:** Используются SharedPreferences для хранения настроек, что позволяет легко переключаться между различными профилями UI.

## Установка и запуск

1. **Клонирование репозитория:**

   ```bash
   git clone https://github.com/yourusername/flashlight-configurator.git
Открытие проекта:

Импортируйте проект в Android Studio.

2. **Сборка и запуск:**

Соберите проект и установите приложение на Android устройство с LED подсветкой камеры.

3. **Настройка и передача:**

Выберите нужный профиль (UI0–UI3) через радиокнопки.
Настройте параметры с помощью элементов управления (спиннеры, чекбоксы, поля ввода).
Задайте временные задержки для мигания.
Переведите фонарь в режим программирования: закрутите крышку с нажатой кнопкой и дождитесь включения зеленой подсветки. 
Нажмите «Lock» для отправки ключа разблокировки, затем, если на кнопке включилась зеленая подсветка, кнопку «Write» для передачи конфигурации.
Если при передаче ключа включается красный , то нужно менять временные интервалы миганий.

## Требования
Android: Минимальная версия, например, Android 5.0 Lollipop или выше.
Камера с поддержкой фонарика: Устройство должно поддерживать управление LED фонариком через Camera2 API.

## Структура проекта
MainActivity.java: Основной класс, содержащий логику формирования конфигураций, управления интерфейсом и передачи бинарных сообщений через фонарик.
activity_main.xml: Разметка пользовательского интерфейса.
strings.xml: Ресурсы строк, включая ключ для разблокировки и другие текстовые элементы.
